!function(a){function b(a){var b=z[z.length-1];c(a,b);var d,e=l(a);e!==!1&&a===e.location&&(a+="/"+e.main),z.push(a);try{d=y(a)}finally{z.pop()}return d}function c(a,b){var c=l(b),d=l(a),e=!1;if(c===!1?d!==!1&&(p(a,d)||(e="Access to package internal files from outside of package")):d===!1?o(a,c)||(e="Access to out-of-package files from inside packages"):o(a,c)||(e="Cross-package access"),e)throw e+=' is denied!\nAttempt to access "'+a+'" from "'+b+'"',new Error(e);return!0}function d(a){var b,c;a=a.constructor!==Array?[a]:a.slice();for(var e=0;e<a.length;)c=a[e],b="object"==typeof c&&c.constructor===Object?c:{location:c},r(b,x.defaults),"string"==typeof b.location?(b.location=b.location.replace(/\/$/,""),t[b.location]=b,a.splice(e,1)):(a[e]=b,++e),b.packages&&(b.packages=d(b.packages));return a}function e(a){return"string"!=typeof a?a.location:a}function f(a,b){if(!b)return!1;if("string"==typeof b)return a===b;if(b.constructor===RegExp)return b.test(a);if("function"==typeof b)return b(a);if(b.constructor===Array){for(var c=0;c<b.length;c++)if(f(a,b[c]))return!0;return!1}throw new Error("Pattern should be either string, regexp, or function")}function g(a,b,c){return a===b?!1:(a=e(a),b=e(b),c?v[b]===a:0===b.indexOf(a))}function h(a){return e(a)in v}function i(a,b){return a===b.location||g(b.location,a)&&a.slice(-b.main.length)===b.main}function j(a,b){return f(a.slice(b.location.length+1),b.public)}function k(a,b){if(a in s)return s[a]!==!1;var c;return b?c=g(b,a):(b=l(a),c=b!==!1),c&&(s[a]=b.location),c}function l(a){if(a in s)return s[a]!==!1?t[s[a]]:!1;for(var b in t){var c=t[b];if(k(a,c)){for(var d;c&&c.packages;)d=c,c=m(a,d.packages,d.location);return c||d}}return(c=m(a,u))?c:(s[a]=!1,!1)}function m(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];if(n(a,e,c))return l(a)}return!1}function n(a,b,c){var d,e="",g=0;c||(c=""),c.length>0&&(c+="/");for(var h=(c?a.slice(c.length):a).split("/"),i=0;i<h.length;i++)i>0&&(e+="/"),e+=h[i],f(e,b.location)&&(d=q(b),d.location=c+e,t[d.location]=d,v[d.location]=c.replace(/\/$/,""),s[a]=d.location,++g);return g>0}function o(a,b){var c=l(a),d=!1;return d=c===!1?f(a,b.external):c===b||g(b,c,!0)&&(i(a,c)||j(a,c))}function p(a,b){var c=l(a);return c===b?a===b.location||a===b.location+"/"+b.main||!h(b)&&j(a,b):!0}function q(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];b[c]=d.constructor===Array?d.slice():"object"==typeof d&&d.constructor===Object?q(d):d}return b}function r(a,b){for(var c in b)b.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&(a[c]=b[c])}var s={},t={},u=[],v={},w=!1,x={defaults:{main:"main","public":!1,external:!1,packages:!1,inheritable:!1},init:function(a){if(w)throw new Error("Packages list already initialized");return w=!0,u=d(a),!0}},y=a.require,z=["__root__"];b.packages=x;for(var A in y)b[A]=y[A];a.require=b}(this);